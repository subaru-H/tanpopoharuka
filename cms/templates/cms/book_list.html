{% extends "cms/base.html" %}

{% block title %}書籍の一覧{% endblock title %}


{% block content %}

  {% if user.is_authenticated %}<!-- ログインしてた場合の処理 -->

  {% else %}<!-- ログインしてない場合の処理(ログインボタンを表示)，そもそもログインしてない状態で開いたらログイン画面に飛ばす -->
    <script>
      login_display();
    </script>
  {% endif %}


<div class="container-fluid">
  <div class="row">
    <div class="mt-5"></div>
    <h4 class="mt-4 border-bottom">書籍の一覧</h4>
    {#<a href="{% url 'cms:book_add' %}" class="btn btn-primary btn-sm my-3">追加</a>#}
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">蔵書番号</th>
          <th scope="col">書籍名</th>
          <th scope="col">出版社</th>
          <th scope="col">貸出可否</th>
          <th scope="col">借りている人</th>
          <th scope="col">操作</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
        <tr>
          <th scope="row">{{ book.book_num }}</th>
          <td>{{ book.name }}</td>
          <td>{{ book.publisher }}</td>
            {% if book.isavailable%}
              <td>可</td>
            {% else %}
              <td>不可</td>
            {% endif %}
          <td>{{ book.renter }}</td>
          <td>
            {%if book.isavailable%}
              <a href="{% url 'cms:book_rent' book_id=book.id %}" class="btn btn-outline-primary btn-sm">かりる</a>
            {% else %}
              <a href="{% url 'cms:book_return' book_id=book.id %}" class="btn btn-outline-primary btn-sm">かえす</a>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock content %}